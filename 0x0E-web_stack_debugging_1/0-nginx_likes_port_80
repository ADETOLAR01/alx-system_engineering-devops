#!/usr/bin/env bash

This script installs Nginx and configures it to listen on port 80 for all active IPv4 IPs.
Install Nginx

sudo apt-get update
sudo apt-get install -y nginx

Configure Nginx

sudo sed -i '/listen 
:
:
:::80 default_server;/c\listen 80 default_server;' /etc/nginx/sites-available/default

Restart Nginx

sudo systemctl restart nginx

Verify that Nginx is listening on port 80

sudo ss -tlnp | grep nginx | grep ':80'

Verify that Nginx is accessible from outside the container

curl http://localhost:80

Get the list of all active IPv4 IPs

ips=$(hostname -I | awk '{print $1}')

Add a rule to the firewall to allow incoming traffic to port 80

for ip in $ips; do
sudo ufw allow from $ip to any port 80 proto tcp
done

Print a message indicating that the setup is complete

echo "Nginx is now listening on port 80 for all active IPv4 IPs."
